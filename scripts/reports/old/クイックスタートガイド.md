# 🚀 クイックスタートガイド

**最終更新**: 2025年10月27日

---

## ⚡ すぐに使える実行コマンド

### 基本的な使い方

```bash
cd /Users/fukushima/Documents/xml_anken/gyosei-xml/scripts/education_script

# 変換実行
python3 convert_list_unified.py test_input5.xml test_output5_new.xml
```

### 実行結果の例

```
入力ファイル: test_input5.xml
出力ファイル: test_output5_demo.xml

Phase 0: Article要素の分割...
  → 1個のArticleを分割しました
Phase 1: 科目構造の変換...
フェーズ2: Paragraph構造の変換...
Phase 3: Article Num振り直し...
  → 14個のArticle Numを振り直しました
Phase 4: Paragraph番号の再採番...
  ✓ Paragraph番号を再採番しました
Phase 5: XML整形...
  ✓ XMLを整形しました（2スペースインデント）

変換完了！

処理統計:
  Article分割数: 1
  科目構造の変換数: 7
  Paragraph構造の変換数: 12
  作成されたItem要素: 7
  作成されたParagraph要素: 18
  Article Num振り直し数: 14
```

---

## 📊 現在利用可能な機能

### ✅ 実行される変換処理

| 機能 | 説明 | 実装状況 |
|------|------|---------|
| **Article分割** | 「第１」→「第２」で自動分割 | ✅ 動作中 |
| **科目構造変換** | 〔医療と社会〕パターンの処理 | ✅ 動作中 |
| **Paragraph構造変換** | List+Column → Item/Subitem | ✅ 動作中 |
| **Article Num振り直し** | ダミー値を連番に変更 | ✅ 動作中 |
| **Paragraph番号再採番** | Paragraph番号の整理 | ✅ 動作中 |
| **XML整形** | 2スペースインデント | ✅ 動作中 |

### ⏳ 実装済みだが未統合の機能

| 機能 | 説明 | 実装状況 |
|------|------|---------|
| **ラベル分離** | （ウ）　テキスト → 分離 | ✅ 基盤関数のみ |
| **階層判定** | 6レベルの階層判定 | ✅ 基盤関数のみ |
| **中間要素挿入** | 空要素の自動挿入 | ✅ 基盤関数のみ |

**注意**: これらの機能は基盤関数として実装されていますが、まだ実際の変換処理には統合されていません。Phase 2で統合予定です。

---

## 🧪 テスト実行

### 1. ラベル分離機能のテスト

```bash
cd /Users/fukushima/Documents/xml_anken/gyosei-xml/scripts/education_script

python3 test_split_label.py
```

**期待される結果:**
```
テスト結果: 11個成功, 0個失敗
```

### 2. 変換結果の確認

```bash
# 要素数をカウント
echo "=== Article数 ==="
grep -o "<Article" test_output5_demo.xml | wc -l

echo "=== Item数 ==="
grep -o "<Item" test_output5_demo.xml | wc -l

echo "=== Paragraph数 ==="
grep -o "<Paragraph" test_output5_demo.xml | wc -l
```

---

## 📁 ファイル構成

```
scripts/education_script/
├── convert_list_unified.py         # メインスクリプト ← 実行対象
├── test_split_label.py             # ラベル分離テスト
├── test_input5.xml                 # サンプル入力ファイル
├── test_output5.xml                # 期待される出力（手動修正版）
├── test_output5_demo.xml           # 実行結果（生成される）
├── 修正ロジック分析.md              # 変換ロジックの詳細
├── 実装戦略分析.md                  # 実装計画
├── 実行ガイド.md                    # 詳細な実行ガイド ← このファイル
└── クイックスタートガイド.md        # 簡易ガイド
```

---

## 💡 使用例

### 例1: test_input5.xmlの変換

```bash
cd /Users/fukushima/Documents/xml_anken/gyosei-xml/scripts/education_script

# 変換実行
python3 convert_list_unified.py test_input5.xml test_output5_new.xml

# 結果確認
ls -lh test_output5_new.xml
# → 約316KB のファイルが生成される
```

### 例2: 他のXMLファイルの変換

```bash
# 相対パス
python3 convert_list_unified.py ../../xml_data/0/some_file.xml output.xml

# 絶対パス
python3 convert_list_unified.py \
  /Users/fukushima/Documents/xml_anken/gyosei-xml/xml_data/0/some_file.xml \
  /Users/fukushima/Documents/xml_anken/gyosei-xml/fixed_xml/some_file_fixed.xml
```

### 例3: 出力ファイル名を自動生成

```bash
# 出力ファイル名を省略すると、_converted が付いたファイル名になる
python3 convert_list_unified.py test_input5.xml
# → test_input5_converted.xml が生成される
```

---

## ⚠️ よくある質問

### Q: ラベル分離機能が動作しない？

**A**: 現在、`split_label_and_text()`は基盤関数として実装されただけで、実際の変換処理には統合されていません。

**現状:**
- ✅ メソッドは実装済み
- ✅ テストで動作確認済み
- ⏳ 変換処理への統合は未実施（Phase 2で予定）

**動作確認方法:**
```bash
python3 test_split_label.py
```

### Q: どの機能が実際に動作する？

**A**: 以下の機能が現在動作します：

1. ✅ Article分割（「第１」→「第２」）
2. ✅ 科目構造変換（〔科目名〕パターン）
3. ✅ Paragraph構造変換（List+Column）
4. ✅ Article Num振り直し
5. ✅ XML整形

**動作しない機能:**
- ⏳ ラベル分離（基盤関数のみ）
- ⏳ 完全な階層判定（基盤関数のみ）
- ⏳ 複雑パターンの処理（未実装）

### Q: いつ新機能が統合される？

**A**: Phase 2の実装で統合予定です。

**実装スケジュール:**
- Phase 0: Article分割 ✅ 完了
- Phase 0.5: ラベル分離（基盤関数） ✅ 完了
- Phase 1: 階層判定（基盤関数） ✅ 完了
- **Phase 2: 変換処理への統合** ⏳ 予定（3-4日）
- Phase 3: 角括弧科目名の完全実装 ⏳ 予定（1-2日）

---

## 🔧 トラブルシューティング

### エラー: 入力ファイルが見つかりません

```bash
# ファイルの存在確認
ls -l test_input5.xml

# 正しいディレクトリにいるか確認
pwd
# → /Users/fukushima/Documents/xml_anken/gyosei-xml/scripts/education_script
```

### エラー: Python 3.9以降が必要

```bash
# Pythonバージョン確認
python3 --version
# → Python 3.9.0 以上が必要
```

### 変換結果が期待と異なる

```bash
# 要素数を比較
echo "=== Input ==="
grep -o "<Article" test_input5.xml | wc -l
grep -o "<List" test_input5.xml | wc -l

echo "=== Output ==="
grep -o "<Article" test_output5_demo.xml | wc -l
grep -o "<Item" test_output5_demo.xml | wc -l
```

---

## 📚 詳細情報

より詳しい情報は以下のドキュメントを参照してください：

- **実行ガイド.md** - 詳細な実行方法とトラブルシューティング
- **修正ロジック分析.md** - 変換ロジックの完全な説明（2,121行）
- **実装戦略分析.md** - 実装計画とスケジュール（1,206行）
- **ラベル分離実装サマリー.md** - Phase 0.5の実装詳細

---

## ✅ まとめ

### 今すぐできること

```bash
# 1. スクリプトの実行
python3 convert_list_unified.py test_input5.xml test_output5_new.xml

# 2. ラベル分離機能のテスト
python3 test_split_label.py

# 3. 結果の確認
ls -lh test_output5_new.xml
```

### できないこと（Phase 2で対応予定）

- ⏳ Column構造なしList要素の自動変換
- ⏳ ParagraphSentence内のラベル+テキストの自動分離
- ⏳ 複雑な階層パターンの完全処理

---

**疑問や問題がある場合は、`実行ガイド.md`の「トラブルシューティング」セクションを参照してください。**

---

**作成日**: 2025年10月27日  
**ファイル**: `/Users/fukushima/Documents/xml_anken/gyosei-xml/scripts/education_script/クイックスタートガイド.md`

