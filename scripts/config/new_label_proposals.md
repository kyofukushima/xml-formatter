# 新規ラベル提案

## 分析対象ファイル
`sample/R04null[2450]1400_R04null[2450]1400_R041006_1.xml`

## 分析結果

### Column1のパターン分布
- **全角数字のみ**: 4件（２、３、４、５）
- **数字+ピリオド（階層番号）**: 12件（４．１、４．２．１、４．３．２など）
- **全角小文字アルファベット+閉じ括弧のみ**: 30件（ａ）、ｂ）、ｃ）など）
- **全角数字+閉じ括弧のみ**: 2件（１）、２））
- **注記**: 3件（注記１、注記２、注記３）
- **アルファベット略称**: 1件（ＪＡＳ）- ラベルではなく通常テキスト
- **その他**: 4件（通常テキスト）

## 新規ラベル提案

### 1. 閉じ括弧のみの全角小文字アルファベット
**現状**: 既存の`paren_fullwidth_lowercase_alphabet`は開き括弧`（`が必要だが、実際のデータでは閉じ括弧`）`のみが使用されている

**提案ラベルID**: `closing_paren_fullwidth_lowercase_alphabet`

**パターン**: `^[ａ-ｚ]+[）)]$`

**例**: `ａ）`, `ｂ）`, `ｃ）`, `ｄ）`, `ｅ）`, `ｆ）`, `ｇ）`, `ｈ）`, `ｉ）`, `ｊ）`, `ｋ）`, `ｌ）`, `ｍ）`, `ｎ）`

**説明**: 閉じ括弧のみの全角小文字アルファベット（開き括弧なし）

**優先順位**: `paren_fullwidth_lowercase_alphabet`の後

---

### 2. 閉じ括弧のみの全角数字
**現状**: 既存の`paren_fullwidth_number`は開き括弧`（`が必要だが、実際のデータでは閉じ括弧`）`のみが使用されている

**提案ラベルID**: `closing_paren_fullwidth_number`

**パターン**: `^[０-９]+[）)]$`

**例**: `１）`, `２）`, `３）`

**説明**: 閉じ括弧のみの全角数字（開き括弧なし）

**優先順位**: `paren_fullwidth_number`の後

---

### 3. 階層番号（数字+ピリオド）
**現状**: 既存のパターンではマッチしない

**提案ラベルID**: `hierarchical_number`

**パターン**: `^[０-９]+[．.][０-９]+([．.][０-９]+)*$`

**例**: `４．１`, `４．２`, `４．２．１`, `４．２．２`, `４．２．３`, `４．３`, `４．３．１`, `４．３．２`, `４．３．３`, `４．４`, `４．４．１`, `４．４．２`

**説明**: 階層的な番号付け（数字+ピリオドの組み合わせ）

**優先順位**: `fullwidth_number`の後、`paren_fullwidth_number`の前

**注意**: ピリオドは全角`．`（U+FF0E）と半角`.`（U+002E）の両方に対応

---

### 4. 注記
**現状**: 既存のパターンではマッチしない

**提案ラベルID**: `note_label`

**パターン**: `^注記[０-９]+$`

**例**: `注記１`, `注記２`, `注記３`

**説明**: 注記ラベル（注記+数字）

**優先順位**: `article_boundary`の後、`double_paren_*`の前

---

## 実装時の注意点

1. **優先順位の設定**: `pattern_priority`配列に適切な位置に追加する必要があります
   - より具体的なパターンを先に配置
   - 既存パターンとの競合を避ける

2. **階層判定**: 新しいラベルタイプが階層判定に影響する場合は、`xml_converter.py`の`are_same_hierarchy()`関数の修正が必要になる可能性があります

3. **テスト**: 新しいラベルが正しく認識されるか、既存のラベルと競合しないかをテストする必要があります

## 追加推奨順序

1. **最優先**: `closing_paren_fullwidth_lowercase_alphabet`（最も頻出：30件）
2. **高優先**: `hierarchical_number`（頻出：12件）
3. **中優先**: `closing_paren_fullwidth_number`（頻出：2件）
4. **低優先**: `note_label`（頻出：3件、ただし特殊用途）













